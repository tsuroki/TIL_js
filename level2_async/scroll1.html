<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="./styles/reset.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <title>Scroll</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <style>
        body,html{height: 300vh;
            background : linear-gradient(beige, coral, pink, orange)
        }
        #top {position: fixed; right: 20px; bottom: 20px;
        }
        .bnr {background-color: hotpink; height: 50px;}
        header {position: relative; z-index: 999; background-color: #fff; height: 70px; width: 100%;}

        .header_fixed{position: fixed; top: 0; width: 100%;}

        .title {background-color: aqua; height: 70px;}
        .contents:nth-child(1) {background-color: beige;}
        .contents:nth-child(2) {background-color: blue;}
        .contents:nth-child(3) {background-color: violet;}
    </style>
</head>
<body>
    <button type="button" id="top">
        위로
    </button>
    <main>
        <div class="bnr">
            광고
        </div>
        <header>
            header
        </header>
        <div class="title">
            <a href="#">책소개</a>
            <a href="#">리뷰</a>
            <a href="#">배송정보</a>
        </div>
        <div class="contents" style="height:80vh">책 소개 내용</div>
        <div class="contents" style="height:80vh">리뷰 내용</div>
        <div class="contents" style="height:80vh">배송정보 내용</div>
    </main>
    <script>
        const titleA = document.querySelectorAll('.title a')
        const topBtn = document.querySelector('#top')
        const contents = document.querySelectorAll('.contents')
        const header = document.querySelector('header')

        /* 스크롤 이벤트 */
        /* window.addEventListener('scroll', ()=>{
            console.log(window.pageYOffset)
            if(window.pageYOffset > 300) console.log('현재 위치는 300보다 큽니다.   ')
        }) */

        // scroll이벤트의 경우, 마우스 휠을 이용해 스크롤을 이동할 경우 발생하는 이벤트이다.
        topBtn.style.opacity = 0
        window.addEventListener('scroll', () => {
            if(window.pageYOffset > 50){
                /* header.style.position = 'fixed';
                header.style.top = '0px'; */
                header.classList.add('header_fixed') // header 클래스 추가
                topBtn.style.visibility = 'visible'
                topBtn.style.opacity = 1
                topBtn.style.transition = '0.3s'
            } else {
                header.classList.remove('header_fixed') //header 클래스 제거
                topBtn.style.visibility = 'hidden'
                topBtn.style.opacity = 0
                /* header.style.position = 'relative'; */
            
            }
        })
        
        titleA.forEach((o,i,a)=> {
            o.addEventListener('click', (e)=>{
                e.preventDefault();
                window.scrollTo(0, contents[i].offsetTop)
            })
        })

        /* titleA[1].addEventListener('click', (e)=> {
            e.preventDefault();
            console.log(contents[1].offsetTop)
            window.scrollTo({left:0, top : contents[1].offsetTop-80, behavior:'smooth'})  //
        }) */
        // .scrollTo()의 경우, 스크롤은 인터넷 창(Window)에 속해 있기 때문에 앞에 window를 붙이는 편이다.
        // window.scrollTo()를 하게 되면, 인터넷 창(윈도우 창)의 스크롤을 ()안의 좌표로 이동을 하겠다는 뜻인데
        // window.scrollTo(x,y) 절대 좌표 기준으로 움직이므로 참고해야한다.
        // window.scrollTo(x,y, behavior:'smooth') 이 때 behavior는 뜻 그대로 스크롤 시 윈도우 행동을 지칭하는 말로
        // smooth를 쓰면 해당 상대 좌표로 천천히 움직이겠다는 뜻이다.
        
        topBtn.addEventListener('click' ,()=> {
            //window.scrollTo(x좌표 y좌표 option) / 스크롤 어디로 이동할 것인지!
            /* window.scrollTo(100, 200) */ // 스크롤 어디로 이동할 것인지!
            //window.scrollTo(left : 0, top:100) / 스크롤 어디로 이동할 것인지!
            window.scrollTo({left : 0, top : 0, behavior : 'smooth'}) // 스크롤 어디로 이동할 것인지!
        })
    </script>
</body>
</html>